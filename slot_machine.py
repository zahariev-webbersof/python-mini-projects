import random
import time
import sys

# –°–∏–º–≤–æ–ª–∏ –∏ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –ø—Ä–∏ 3 –µ–¥–Ω–∞–∫–≤–∏
symbols = {
    "üçí": 2,
    "üçã": 3,
    "üçâ": 4,
    "üçá": 5,
    "üíé": 10,
    "üîî": 7,
    "üçÄ": 8
}

# –ò–≥—Ä–æ–≤–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏
balance = 0
total_lost = 0
bet = 1  # –º–∏–Ω–∏–º–∞–ª–µ–Ω –∑–∞–ª–æ–≥
game_history = []

# –°–∫—Ä–∏—Ç/—Å–ª—É—á–∞–µ–Ω –±–æ–Ω—É—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
hidden_bonus_trigger = 1000        # –ø—Ä–∞–≥–æ–≤–∞—Ç–∞ –∑–∞–≥—É–±–∞ –ø—Ä–∏ –∫–æ—è—Ç–æ –º–æ–∂–µ –¥–∞ —Å–µ –∞–∫—Ç–∏–≤–∏—Ä–∞ –±–æ–Ω—É—Å
hidden_bonus_percentage = 0.10     # 10% –æ—Ç –∑–∞–≥—É–±–∏—Ç–µ
hidden_bonus_chance = 1         # 100% —à–∞–Ω—Å –¥–∞ —Å–µ –∞–∫—Ç–∏–≤–∏—Ä–∞ (–º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–º–µ–Ω–∏)

def print_welcome():
    print("=" * 50)
    print("üé∞ –î–û–ë–†–ï –î–û–®–™–õ –í –ö–ê–ó–ò–ù–û –†–û–¢–ê–¢–ò–í–ö–ê üé∞")
    print("=" * 50)
    print("–ü—Ä–∞–≤–∏–ª–∞ (–≤–∞–∂–Ω–∏ –Ω–µ—â–∞):")
    print(" - –ú–∏–Ω–∏–º–∞–ª–µ–Ω –∑–∞–ª–æ–≥: 1 –ª–≤.")
    print(" - 3 –µ–¥–Ω–∞–∫–≤–∏ —Å–∏–º–≤–æ–ª–∞ = –≥–æ–ª—è–º–∞ –ø–µ—á–∞–ª–±–∞ üéâ")
    print(" - 2 –µ–¥–Ω–∞–∫–≤–∏ —Å–∏–º–≤–æ–ª–∞ –æ—Ç–ª—è–≤–æ = –¥–≤–æ–π–Ω–∞ –ø–µ—á–∞–ª–±–∞ ‚ú®")
    print("=" * 50)

def deposit_money():
    global balance
    while True:
        try:
            amount = int(input("–í—ä–≤–µ–¥–∏ –Ω–∞—á–∞–ª–µ–Ω –±–∞–ª–∞–Ω—Å (–ª–≤): "))
            if amount <= 0:
                print("‚ùå –ú–æ–ª—è, –≤—ä–≤–µ–¥–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª–Ω–æ —á–∏—Å–ª–æ.")
                continue
            balance = amount
            print(f"‚úÖ –ë–∞–ª–∞–Ω—Å—ä—Ç –µ –∑–∞–¥–∞–¥–µ–Ω –Ω–∞ {balance} –ª–≤.\n")
            break
        except ValueError:
            print("‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω–æ —á–∏—Å–ª–æ, –æ–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ.")

def show_menu():
    print("\n--- –ì–õ–ê–í–ù–û –ú–ï–ù–Æ ---")
    print("1. –ó–∞–≤—ä—Ä—Ç–∏ —Ä–æ—Ç–∞—Ç–∏–≤–∫–∞—Ç–∞ üé∞")
    print("2. –ü—Ä–æ–º–µ–Ω–∏ –∑–∞–ª–æ–≥–∞ (–º–∏–Ω. 1 –ª–≤) üíµ")
    print("3. –ü–æ–∫–∞–∂–∏ –±–∞–ª–∞–Ω—Å–∞ üí∞")
    print("4. –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –∏–≥—Ä–∞—Ç–∞ üìù")
    print("5. –ò–∑—Ö–æ–¥ üö™")

def apply_hidden_bonus():
    """
    –û–ø–∏—Ç–≤–∞ –¥–∞ –ø—Ä–∏–ª–æ–∂–∏ —Å–∫—Ä–∏—Ç –±–æ–Ω—É—Å.
    –í—Ä—ä—â–∞ (triggered: bool, bonus_amount: int)
    –ê–∫–æ total_lost >= hidden_bonus_trigger –∏ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—Ç–∞ –ø—Ä–µ–º–∏–Ω–µ,
    –≤—Ä—ä—â–∞ True –∏ —Å—É–º–∞—Ç–∞ –Ω–∞ –±–æ–Ω—É—Å–∞ (100% –æ—Ç total_lost –∫–∞—Ç–æ —Ü—è–ª–æ —á–∏—Å–ª–æ).
    –°–ª–µ–¥ —Ç–æ–≤–∞ –Ω—É–ª–∏—Ä–∞ total_lost.
    """
    global total_lost, balance

    if total_lost > hidden_bonus_trigger:
        # —à–∞–Ω—Å –∑–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ (–Ω–∞–ø—Ä. 100%)
        if random.random() < hidden_bonus_chance:
            bonus = int(total_lost * hidden_bonus_percentage)
            if bonus > 0:
                balance += bonus
                total_lost = 0  # –Ω—É–ª–∏—Ä–∞–º–µ –Ω–∞—Ç—Ä—É–ø–∞–Ω–∏—Ç–µ –∑–∞–≥—É–±–∏ —Å–ª–µ–¥ –¥–∞–≤–∞–Ω–µ –Ω–∞ –±–æ–Ω—É—Å
                return True, bonus
    return False, 0

def spin_slot():
    global balance, total_lost, bet

    if balance < bet:
        print("‚ö†Ô∏è –ù—è–º–∞—à –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –ø–∞—Ä–∏ –∑–∞ –∑–∞–≤—ä—Ä—Ç–∞–Ω–µ.")
        return

    # –¢–∞–∫—Å—É–≤–∞–º–µ –∑–∞–ª–æ–≥–∞
    balance -= bet
    total_lost += bet

    # –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –∑–∞–≤—ä—Ä—Ç–∞–Ω–µ
    print("\n–ó–∞–≤—ä—Ä—Ç–∞–Ω–µ...")
    time.sleep(0.8)

    reels = [random.choice(list(symbols.keys())) for _ in range(3)]
    print(" | ".join(reels))

    win_amount = 0

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ 3 –µ–¥–Ω–∞–∫–≤–∏ (–¥–∂–∞–∫–ø–æ—Ç)
    if reels[0] == reels[1] == reels[2]:
        multiplier = symbols[reels[0]]
        win_amount = bet * multiplier
        print(f"üéâ –î–ñ–ê–ö–ü–û–¢! –°–ø–µ—á–µ–ª–∏ {win_amount} –ª–≤ —Å {reels[0]} {reels[1]} {reels[2]}!")
        total_lost = 0  # –Ω—É–ª–∏—Ä–∞–º–µ –∑–∞–≥—É–±–∏—Ç–µ –ø—Ä–∏ –≥–æ–ª—è–º–∞ –ø–µ—á–∞–ª–±–∞
        game_history.append(f"–ü–ï–ß–ê–õ–ë–ê: +{win_amount} –ª–≤ —Å—ä—Å {reels}")

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ 2 –µ–¥–Ω–∞–∫–≤–∏ –æ—Ç–ª—è–≤–æ (–ø–æ–∑–∏—Ü–∏–∏ 0 –∏ 1)
    elif reels[0] == reels[1]:
        win_amount = bet * 2
        print(f"‚ú® –ü–ï–ß–ê–õ–ë–ê! –î–≤–∞ –µ–¥–Ω–∞–∫–≤–∏ —Å–∏–º–≤–æ–ª–∞ –æ—Ç–ª—è–≤–æ ‚Üí {win_amount} –ª–≤!")
        game_history.append(f"–ü–ï–ß–ê–õ–ë–ê (2 —Å–∏–º–≤–æ–ª–∞): +{win_amount} –ª–≤ —Å—ä—Å {reels}")

    else:
        print("üò¢ –ù—è–º–∞ –ø–µ—á–∞–ª–±–∞ —Ç–æ–∑–∏ –ø—ä—Ç.")
        game_history.append(f"–ó–ê–ì–£–ë–ê: -{bet} –ª–≤ —Å—ä—Å {reels}")

    # –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –ø–µ—á–∞–ª–±–∞—Ç–∞ –∫—ä–º –±–∞–ª–∞–Ω—Å–∞
    balance += win_amount

    # –û–ø–∏—Ç –∑–∞ –ø—Ä–∏–ª–∞–≥–∞–Ω–µ –Ω–∞ —Å–∫—Ä–∏—Ç–∏—è –±–æ–Ω—É—Å
    triggered, bonus_amount = apply_hidden_bonus()
    if triggered:
        # –ü–æ–∫–∞–∑–≤–∞–º–µ –Ω–∞ –∏–≥—Ä–∞—á–∞, —á–µ –µ ‚Äû—Å–ª—É—á–∞–π–Ω–æ —Å–ø–µ—á–µ–ª–∏–ª‚Äú –∏ –∫–æ–ª–∫–æ –µ –±–æ–Ω—É—Å—ä—Ç.
        # –¢–æ–≤–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ –µ –ø—Ä–µ–¥–≤–∏–¥–µ–Ω–æ –¥–∞ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ –Ω–µ–æ—á–∞–∫–≤–∞–Ω–∞ –ø–µ—á–∞–ª–±–∞/–∫—ä—Å–º–µ—Ç.
        print()
        print("üéâ –ò–∑–≥–ª–µ–∂–¥–∞ –∫—ä—Å–º–µ—Ç—ä—Ç —Ç–∏ —Å–µ —É—Å–º–∏—Ö–Ω–∞! üéâ")
        print(f"–ë–æ–Ω—É—Å –∏–≥—Ä–∞: +{bonus_amount} –ª–≤.")
        print("–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–π –¥–∞ –∏–≥—Ä–∞–µ—à ‚Äî –∫—ä—Å–º–µ—Ç–∞ –µ —Å —Ç–µ–±! üòâ")
        game_history.append(f"–ë–û–ù–£–° (—Å–ª—É—á–∞–µ–Ω): +{bonus_amount} –ª–≤")

    print(f"\nüí∞ –¢–µ–∫—É—â –±–∞–ª–∞–Ω—Å: {balance} –ª–≤")

def change_bet():
    global bet
    while True:
        try:
            new_bet = int(input("–í—ä–≤–µ–¥–∏ –Ω–æ–≤ –∑–∞–ª–æ–≥ (–º–∏–Ω. 1 –ª–≤): "))
            if new_bet < 1:
                print("‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª–Ω–∏—è—Ç –∑–∞–ª–æ–≥ –µ 1 –ª–≤.")
                continue
            bet = new_bet
            print(f"‚úÖ –ù–æ–≤–∏—è—Ç –∑–∞–ª–æ–≥ –µ {bet} –ª–≤.")
            break
        except ValueError:
            print("‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω–æ —á–∏—Å–ª–æ, –æ–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ.")

def show_balance():
    print(f"üí∞ –¢–µ–∫—É—â –±–∞–ª–∞–Ω—Å: {balance} –ª–≤")

def show_history():
    if not game_history:
        print("üì≠ –í—Å–µ –æ—â–µ –Ω—è–º–∞ –∏–∑–∏–≥—Ä–∞–Ω–∏ –∏–≥—Ä–∏.")
    else:
        print("\n--- –ò–°–¢–û–†–ò–Ø –ù–ê –ò–ì–†–ê–¢–ê ---")
        for entry in game_history:
            print(entry)
        print("-------------------------")

def exit_game():
    print("\nüé≤ –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º —Ç–∏, —á–µ –∏–≥—Ä–∞ –Ω–∞—à–∞—Ç–∞ —Ä–æ—Ç–∞—Ç–∏–≤–∫–∞!")
    print(f"üèÅ –§–∏–Ω–∞–ª–µ–Ω –±–∞–ª–∞–Ω—Å: {balance} –ª–≤")
    sys.exit()

# --- –ì–õ–ê–í–ù–ê –ü–†–û–ì–†–ê–ú–ê ---
print_welcome()
deposit_money()

while True:
    if balance < 1:
        print("\nüíÄ –ù—è–º–∞—à –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –ø–∞—Ä–∏, –∑–∞ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—à.")
        print("–ò–≥—Ä–∞—Ç–∞ –ø—Ä–∏–∫–ª—é—á–∏!")
        break

    show_menu()
    choice = input("–ò–∑–±–µ—Ä–∏ –æ–ø—Ü–∏—è (1-5): ")

    if choice == "1":
        spin_slot()
    elif choice == "2":
        change_bet()
    elif choice == "3":
        show_balance()
    elif choice == "4":
        show_history()
    elif choice == "5":
        exit_game()
    else:
        print("‚ùå –ù–µ–≤–∞–ª–∏–¥–µ–Ω –∏–∑–±–æ—Ä. –ú–æ–ª—è, –∏–∑–±–µ—Ä–∏ –º–µ–∂–¥—É 1 –∏ 5.")
